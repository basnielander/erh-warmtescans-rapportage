<div class="batch-calibration-container">
  <div class="calibration-stats">
    <div class="stat-card">
      <div class="stat-icon">ğŸ“Š</div>
      <div class="stat-content">
        <div class="stat-label">Outdoor Images</div>
        <div class="stat-value">{{ imageCount() }}</div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">ğŸŒ¡ï¸</div>
      <div class="stat-content">
        <div class="stat-label">Temperature Range</div>
        <div class="stat-value">{{ (temperatureMax() - temperatureMin()).toFixed(1) }}Â°C</div>
      </div>
    </div>
  </div>
  
  <div *ngIf="imageCount() === 0" class="no-images-warning">
    <div class="warning-icon">âš ï¸</div>
    <div class="warning-text">
      <strong>No outdoor images found</strong>
      <p>There are no images marked as outdoor in the current folder.</p>
    </div>
  </div>
  
  <div *ngIf="imageCount() > 0" class="calibration-form">
    <div class="form-section">
      <h3>Temperature Settings</h3>
      <p class="section-description">Set the temperature range for all outdoor images</p>
      
      <div class="form-row">
        <div class="form-field">
          <label for="batch-temp-min" class="field-label">
            ğŸ¥¶ Minimum Temperature (Â°C)
          </label>
          <input
            id="batch-temp-min"
            type="number"
            step="0.1"
            [value]="temperatureMin()"
            (input)="onMinChange($any($event.target).value)"
            [disabled]="isProcessing()"
            class="field-input"
            placeholder="0.0"
          />
        </div>
        
        <div class="form-field">
          <label for="batch-temp-max" class="field-label">
            ğŸ”¥ Maximum Temperature (Â°C)
          </label>
          <input
            id="batch-temp-max"
            type="number"
            step="0.1"
            [value]="temperatureMax()"
            (input)="onMaxChange($any($event.target).value)"
            [disabled]="isProcessing()"
            class="field-input"
            placeholder="30.0"
          />
        </div>
      </div>
      
      <div class="temperature-range-display">
        <div class="range-bar">
          <div class="range-label">{{ temperatureMin() }}Â°C</div>
          <div class="range-gradient"></div>
          <div class="range-label">{{ temperatureMax() }}Â°C</div>
        </div>
      </div>
    </div>
    
    <div class="images-preview">
      <h3>Images to Calibrate</h3>
      <div class="image-list">
        <div *ngFor="let image of outdoorImages()" class="image-item">
          <span class="image-icon">ğŸŒ¤ï¸</span>
          <span class="image-name">{{ image.name }}</span>
          <span *ngIf="image.temperatureMin !== undefined" class="image-status">
            (Currently: {{ image.temperatureMin }}Â°C - {{ image.temperatureMax }}Â°C)
          </span>
        </div>
      </div>
    </div>
    
    <div *ngIf="isProcessing()" class="processing-indicator">
      <div class="spinner"></div>
      <div class="processing-text">
        <strong>Processing calibration...</strong>
        <p>Please wait while we calibrate all outdoor images</p>
      </div>
    </div>
  </div>
  
  <div class="calibration-actions">
    <button 
      class="btn-save" 
      (click)="onSave()"
      [disabled]="isProcessing() || imageCount() === 0">
      <span *ngIf="!isProcessing()">âœ… Calibrate All {{ imageCount() }} Images</span>
      <span *ngIf="isProcessing()">â³ Processing...</span>
    </button>
    <button 
      class="btn-cancel" 
      (click)="onCancel()"
      [disabled]="isProcessing()">
      âŒ Cancel
    </button>
  </div>
</div>
